<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CET-4/CET-6è€ƒè¯•æ—¶é—´æ¨¡æ‹Ÿå™¨beta</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <div class="container">
    <div class="column-wrapper">
      <!-- å·¦ä¾§æ  -->
      <div class="left-column">
        <div class="header-wrapper">
          <span class="close-btn" id="closeHeaderBtn" title="å…³é—­è€ƒè¯•ä¿¡æ¯">Ã—</span>
          <div class="exam-time-header" id="examTimeHeader">
            <span id="examType">CET-4</span> è€ƒè¯•æ—¶é—´ <span id="examDate">2025å¹´12æœˆ13æ—¥ä¸Šåˆ</span> <span id="examTimeRange">9:00
              - 11:20</span>
            <div class="exam-countdown" id="examCountdown">è·ç¦»è€ƒè¯•è¿˜æœ‰ X å¤©</div>
          </div>
        </div>

        <h1 id="pageHeader">ğŸ“<span id="examTitle">CET-4</span><br>è€ƒè¯•æ—¶é—´æ¨¡æ‹Ÿå™¨</h1>

        <div class="real-time-display">
          æ¨¡æ‹Ÿè€ƒåœºæ—¶é—´ï¼š<span id="currentTimeSpan">09:00:00</span>
        </div>

        <div class="timer-display">
          è·ç¦»è€ƒè¯•ç»“æŸï¼š<span id="timer">02:20:00</span>
        </div>

        <div class="section-timer-display" id="sectionTimer" style="display: none;">
          æœ¬ç¯èŠ‚å€’è®¡æ—¶ï¼š<span class="time-value">00:00:00</span>
        </div>

        <div class="current-section" id="currentSection">
          è€ƒè¯•å°šæœªå¼€å§‹ï¼Œè¯·ç‚¹å‡»å¼€å§‹æŒ‰é’®
        </div>

        <div class="countdown-container">
          <div class="countdown" id="countdown">
            <span class="countdown-label">ä¸‹ä¸€ç¯èŠ‚ï¼š</span><span class="countdown-value">--</span>
          </div>
          <button onclick="nextSection()" id="nextBtn" class="next-button">â†’</button>
        </div>

        <div class="progress-bar">
          <div class="progress-fill" id="progressFill"></div>
        </div>

        <div class="controls">
          <button onclick="startExam()" id="startBtn">å¼€å§‹è€ƒè¯•</button>
          <button onclick="pauseExam()" id="pauseBtn" disabled>æš‚åœ</button>
          <button onclick="resetExam()" id="resetBtn">é‡ç½®</button>
          <div class="skip-selector">
            <label for="sectionSelect">è·³è½¬åˆ°ç¯èŠ‚:</label>
            <select id="sectionSelect">
              <!-- é€‰é¡¹å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </select>
          </div>
        </div>

        <div class="stats">
          <div class="stat-item">
            <div class="stat-number" id="totalTime">140</div>
            <div class="stat-label">æ€»åˆ†é’Ÿ</div>
          </div>
          <div class="stat-item">
            <div class="stat-number" id="remainingTime">140</div>
            <div class="stat-label">å‰©ä½™åˆ†é’Ÿ</div>
          </div>
          <div class="stat-item">
            <div class="stat-number" id="completedSections">0</div>
            <div class="stat-label">å·²å®Œæˆ</div>
          </div>
        </div>
      </div>

      <!-- å³ä¾§æ  -->
      <div class="right-column">
        <div class="section-timeline" id="timeline">
          <!-- Sections will be populated by JavaScript -->
        </div>
      </div>

      <!-- é¢„è®¾é€‰æ‹©å™¨æ¨ªè·¨ä¸¤æ  -->
      <div class="preset-selector-full-width">
        <div class="custom-preset-selector">
          <div class="preset-selector-header">
            <div class="preset-selector-label">é€‰æ‹©è€ƒè¯•é¢„è®¾:</div>
            <div class="preset-type-buttons">
              <button type="button" class="preset-type-btn active" data-type="official" id="officialPresetBtn">å®˜æ–¹é¢„è®¾</button>
              <button type="button" class="preset-type-btn" data-type="custom" id="customPresetBtn">è‡ªå®šä¹‰é¢„è®¾</button>
            </div>
          </div>
          <div class="preset-selector-dropdown" id="presetSelector">
            <div class="preset-selector-selected" id="selectedPreset">
              <span>CET-4 (å¤§å­¦è‹±è¯­å››çº§)</span>
              <span class="dropdown-arrow">â–¼</span>
            </div>
            <div class="preset-selector-options" id="presetOptions" style="display: none;">
              <div class="preset-option-group" id="officialPresetGroup">
                <div class="option-group-title">å®˜æ–¹é¢„è®¾</div>
                <div class="preset-option" data-value="cet4">CET-4 (å¤§å­¦è‹±è¯­å››çº§)</div>
                <div class="preset-option" data-value="cet6">CET-6 (å¤§å­¦è‹±è¯­å…­çº§)</div>
              </div>
              <div class="preset-option-group" id="customPresetGroup" style="display: none;">
                <div class="option-group-title">è‡ªå®šä¹‰é¢„è®¾</div>
                <div id="customPresetOptions">
                  <!-- è‡ªå®šä¹‰è€ƒè¯•é€‰é¡¹å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- è‡ªå®šä¹‰è€ƒè¯•æŒ‰é’® -->
      <div class="toggle-exam-button-container">
        <button id="customExamBtn" onclick="goToCustomExam()" class="toggle-exam-button" style="background-color: #e67e22;">è‡ªå®šä¹‰è€ƒè¯•è®¾ç½®</button>
      </div>
      
      <!-- ç›´æ¥æ˜¾ç¤ºçš„æ˜¾ç¤ºè®¾ç½®æ§ä»¶ -->
      <div class="inline-display-settings">
        <div class="inline-setting-controls">
          <span class="display-settings-label">æ˜¾ç¤ºè®¾ç½®ï¼š</span>
          <label class="setting-checkbox-horizontal">
            <input type="checkbox" id="inlineShowCurrentTime" name="inlineShowCurrentTime" checked onchange="toggleDisplaySetting('showCurrentTime', this.checked)">
            <span>æ˜¾ç¤º"æ¨¡æ‹Ÿè€ƒåœºæ—¶é—´"</span>
          </label>
          <label class="setting-checkbox-horizontal">
            <input type="checkbox" id="inlineShowCountdownTimer" name="inlineShowCountdownTimer" checked onchange="toggleDisplaySetting('showCountdownTimer', this.checked)">
            <span>æ˜¾ç¤º"è·ç¦»è€ƒè¯•ç»“æŸ"</span>
          </label>
          <label class="setting-checkbox-horizontal">
            <input type="checkbox" id="inlineShowSectionTimer" name="inlineShowSectionTimer" checked onchange="toggleDisplaySetting('showSectionTimer', this.checked)">
            <span>æ˜¾ç¤º"æœ¬ç¯èŠ‚å€’è®¡æ—¶"</span>
          </label>
          <button type="button" id="resetDisplaySettingsBtn" class="reset-display-settings-btn" title="æ¢å¤é»˜è®¤æ˜¾ç¤ºè®¾ç½®" onclick="resetDisplaySettings()">æ¢å¤é¢„è®¾é»˜è®¤æ˜¾ç¤ºè®¾ç½®</button>
        </div>
      </div>
      
    </div>

    <!-- æ¢å¤æç¤ºï¼ˆå°å±å¹•è®¾å¤‡ä½¿ç”¨ï¼‰ -->
    <div class="restore-hint" id="restoreHintSmallScreen" style="display: none;">
      ç‚¹å‡»æ¢å¤å€’æ•°æ—¥æœŸ
    </div>
  </div>

  <!-- åº•éƒ¨åŒºåŸŸï¼šåŠŸèƒ½ä»‹ç»ã€æ¢å¤æç¤ºå’Œå¤‡æ¡ˆä¿¡æ¯ -->
  <div class="bottom-bar">
    <div class="bottom-content">
      <div class="footer-text" id="showIntroBtnBottom" onclick="showIntroduction()">ç‚¹å‡»æ˜¾ç¤ºåŠŸèƒ½ä»‹ç»</div>
      <div class="footer-text restore-hint" id="restoreHintLargeScreen" style="display: none; margin-top: 10px;">
        ç‚¹å‡»æ¢å¤å€’æ•°æ—¥æœŸ
      </div>
      <div class="icp-info">
        <a href="https://beian.miit.gov.cn/" target="_blank">ç²¤ICPå¤‡2026000755å·</a>
        | 
        <img src="ga_icon.png" alt="å…¬å®‰å¤‡æ¡ˆå›¾æ ‡" style="vertical-align: middle; width: 16px; height: 16px;" />
        <a href="https://beian.mps.gov.cn/#/query/webSearch?code=44030002009821" rel="noreferrer" target="_blank">ç²¤å…¬ç½‘å®‰å¤‡44030002009821å·</a>
      </div>
    </div>
  </div>

  <script>
    function showIntroduction() {
      window.open('introduction.html', '_blank');
    }
    
    // è·³è½¬åˆ°è‡ªå®šä¹‰è€ƒè¯•é…ç½®é¡µé¢
    function goToCustomExam() {
      window.location.href = 'custom-exam.html';
    }
    
    // å¤„ç†è€ƒè¯•é¢„è®¾é€‰æ‹©å˜åŒ–
    function handlePresetChange(value) {
      if (value === 'cet4' || value === 'cet6') {
        // å®˜æ–¹é¢„è®¾
        currentExamType = value;
        updateExamConfig(officialExams[value]);
        
        // æ›´æ–°æ˜¾ç¤ºçš„é¢„è®¾åç§°
        const presetName = value === 'cet4' ? 'CET-4 (å¤§å­¦è‹±è¯­å››çº§)' : 'CET-6 (å¤§å­¦è‹±è¯­å…­çº§)';
        document.getElementById('selectedPreset').innerHTML = `<span>${presetName}</span><span class="dropdown-arrow">â–¼</span>`;
        // ç§»é™¤è‡ªå®šä¹‰é€‰ä¸­æ ·å¼
        document.getElementById('selectedPreset').classList.remove('custom-selected');
      } else {
        // è‡ªå®šä¹‰é¢„è®¾
        selectCustomExam(value);
        
        // æ›´æ–°æ˜¾ç¤ºçš„é¢„è®¾åç§°
        document.getElementById('selectedPreset').innerHTML = `<span>${value}</span><span class="dropdown-arrow">â–¼</span>`;
        // æ·»åŠ è‡ªå®šä¹‰é€‰ä¸­æ ·å¼
        document.getElementById('selectedPreset').classList.add('custom-selected');
      }
      
      // éšè—ä¸‹æ‹‰èœå•
      document.getElementById('presetOptions').style.display = 'none';
    }
    
    // åŠ¨æ€å¡«å……è‡ªå®šä¹‰è€ƒè¯•é€‰é¡¹
    function populateCustomPresets() {
      const customPresetOptions = document.getElementById('customPresetOptions');
      // æ¸…ç©ºç°æœ‰é€‰é¡¹
      customPresetOptions.innerHTML = '';
      
      if (customExams && customExams.length > 0) {
        customExams.forEach(exam => {
          const option = document.createElement('div');
          option.className = 'preset-option';
          option.textContent = exam.name;
          option.setAttribute('data-value', exam.name);
          // åœ¨è¿™é‡Œæ·»åŠ ç‚¹å‡»äº‹ä»¶ç›‘å¬å™¨
          option.addEventListener('click', function() {
            handlePresetChange(this.getAttribute('data-value'));
          });
          customPresetOptions.appendChild(option);
        });
      } else {
        const option = document.createElement('div');
        option.className = 'preset-option disabled';
        option.textContent = 'æ— è‡ªå®šä¹‰è€ƒè¯•';
        option.style.color = '#aaa';
        customPresetOptions.appendChild(option);
      }
    }
    
    // åœ¨DOMåŠ è½½å®Œæˆåè®¾ç½®è‡ªå®šä¹‰é€‰æ‹©å™¨äº‹ä»¶
    document.addEventListener('DOMContentLoaded', function() {
      // ä¸ºè‡ªå®šä¹‰é€‰æ‹©å™¨æ·»åŠ ç‚¹å‡»äº‹ä»¶
      const selector = document.getElementById('presetSelector');
      const selected = document.getElementById('selectedPreset');
      const options = document.getElementById('presetOptions');
      
      selected.addEventListener('click', function(e) {
        e.stopPropagation();
        const isDisplayed = options.style.display !== 'none';
        options.style.display = isDisplayed ? 'none' : 'block';
      });
      
      // ä½¿ç”¨äº‹ä»¶å§”æ‰˜ä¸ºæ‰€æœ‰é¢„è®¾é€‰é¡¹æ·»åŠ ç‚¹å‡»äº‹ä»¶
      options.addEventListener('click', function(e) {
        if (e.target.classList.contains('preset-option') && !e.target.classList.contains('disabled')) {
          const value = e.target.getAttribute('data-value');
          handlePresetChange(value);
        }
      });
      
      // ç‚¹å‡»é¡µé¢å…¶ä»–åœ°æ–¹å…³é—­ä¸‹æ‹‰èœå•
      document.addEventListener('click', function(e) {
        if (!selector.contains(e.target)) {
          options.style.display = 'none';
        }
      });
      
      // é¢„è®¾ç±»å‹åˆ‡æ¢æŒ‰é’®äº‹ä»¶
      const officialBtn = document.getElementById('officialPresetBtn');
      const customBtn = document.getElementById('customPresetBtn');
      const officialGroup = document.getElementById('officialPresetGroup');
      const customGroup = document.getElementById('customPresetGroup');
      
      officialBtn.addEventListener('click', function() {
        officialBtn.classList.add('active');
        customBtn.classList.remove('active');
        officialGroup.style.display = 'block';
        customGroup.style.display = 'none';
        // å¦‚æœå½“å‰é€‰ä¸­çš„æ˜¯è‡ªå®šä¹‰é¢„è®¾ï¼Œåˆ‡æ¢åˆ°ç¬¬ä¸€ä¸ªå®˜æ–¹é¢„è®¾
        const selectedValue = selected.querySelector('span').textContent;
        if (selectedValue && !selectedValue.includes('CET-')) {
          handlePresetChange('cet4');
        }
      });
      
      customBtn.addEventListener('click', function() {
        customBtn.classList.add('active');
        officialBtn.classList.remove('active');
        officialGroup.style.display = 'none';
        customGroup.style.display = 'block';
        populateCustomPresets();
      });
      
      populateCustomPresets();
    });
  </script>
  <script src="script.js"></script>
</body>

</html>